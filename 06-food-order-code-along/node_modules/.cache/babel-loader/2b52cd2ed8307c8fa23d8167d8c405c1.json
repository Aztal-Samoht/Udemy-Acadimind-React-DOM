{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback } from \"react\";\nimport URLs from \"../assets/URLs\";\n\nconst useHTTP = () => {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const sendOrder = useCallback(async data => {\n    setIsLoading(true);\n\n    try {\n      const responce = await fetch(URLs.orders, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      });\n\n      if (!responce.ok) {\n        throw new Error('failed to add order');\n      }\n    } catch (e) {\n      setIsLoading(false);\n      setHasError(e.message || 'there was an error, but failed to collect message');\n    }\n\n    setIsLoading(false);\n  }, []);\n  const getMeals = useCallback(async setMeals => {\n    setIsLoading(true);\n    setHasError(false);\n    const loadedMeals = [];\n\n    try {\n      const responce = await fetch(URLs.meals);\n\n      if (!responce.ok) {\n        throw new Error(\"failed to get available meals\");\n      }\n\n      const data = await responce.json();\n\n      for (const mealKey in data) {\n        loadedMeals.push({\n          id: mealKey,\n          name: data[mealKey].name,\n          description: data[mealKey].description,\n          price: +data[mealKey].price\n        });\n      }\n\n      const sendMeal = async data => {\n        setIsLoading(true);\n        let numOfMeals;\n\n        try {\n          const responce = await fetch(URLs.meals, {\n            method: 'POST',\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n          });\n\n          if (!responce.ok) {\n            throw new Error('failed to add meal');\n          }\n        } catch (e) {\n          setIsLoading(false);\n          setHasError(e.message || 'there was an error, but failed to collect message');\n        }\n\n        setIsLoading(false);\n      };\n\n      setMeals(loadedMeals);\n    } catch (e) {\n      setHasError(e.message || \"there was an error, but failed to collect message\");\n    }\n\n    setIsLoading(false);\n  }, []);\n  return {\n    isLoading,\n    hasError,\n    sendMeal,\n    getMeals,\n    sendOrder\n  };\n};\n\n_s(useHTTP, \"Jxmt+tj4RF7JWXwzGSjxNnO2esk=\");\n\nexport default useHTTP;","map":{"version":3,"sources":["D:/Dev/React/06-food-order-code-along/src/hooks/useHTTP.js"],"names":["useState","useCallback","URLs","useHTTP","isLoading","setIsLoading","hasError","setHasError","sendOrder","data","responce","fetch","orders","method","headers","body","JSON","stringify","ok","Error","e","message","getMeals","setMeals","loadedMeals","meals","json","mealKey","push","id","name","description","price","sendMeal","numOfMeals"],"mappings":"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","sourcesContent":["import { useState,useCallback } from \"react\";\r\nimport URLs from \"../assets/URLs\";\r\n\r\nconst useHTTP = () =>{\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [hasError, setHasError] = useState(false);\r\n  \r\n  const sendOrder = useCallback(async (data) => {\r\n      setIsLoading(true);\r\n      try{\r\n       const responce = await fetch(URLs.orders, {\r\n           method: 'POST',\r\n           headers: { \r\n               \"Content-Type\": \"application/json\" \r\n             },\r\n           body: JSON.stringify(data),\r\n       })\r\n       if(!responce.ok){ throw new Error('failed to add order') }\r\n       } catch (e) { setIsLoading(false); setHasError(e.message || 'there was an error, but failed to collect message'); }\r\n      setIsLoading(false);\r\n  },[]);\r\n    \r\n  const getMeals = useCallback(async (setMeals) => {\r\n    setIsLoading(true);\r\n    setHasError(false);\r\n    const loadedMeals = [];\r\n\r\n    try {\r\n      const responce = await fetch(URLs.meals);\r\n      if (!responce.ok) {\r\n        throw new Error(\"failed to get available meals\");\r\n      }\r\n\r\n      const data = await responce.json();\r\n\r\n      for (const mealKey in data) {\r\n        loadedMeals.push({\r\n          id: mealKey,\r\n          name: data[mealKey].name,\r\n          description: data[mealKey].description,\r\n          price: +data[mealKey].price,\r\n        });\r\n      }\r\n\r\n\r\n          \r\n  const sendMeal = async (data) => {\r\n      setIsLoading(true);\r\n      let numOfMeals;\r\n      try{\r\n\r\n      const responce = await fetch(URLs.meals, {\r\n          method: 'POST',\r\n          headers: { \r\n              \"Content-Type\": \"application/json\" \r\n            },\r\n          body: JSON.stringify(data),\r\n      })\r\n      if(!responce.ok){ throw new Error('failed to add meal') }\r\n      } catch (e) { setIsLoading(false); setHasError(e.message || 'there was an error, but failed to collect message'); }\r\n      setIsLoading(false);\r\n  }\r\n  \r\n  \r\n  \r\n        setMeals(loadedMeals)\r\n      } catch (e) {\r\n        setHasError( e.message || \"there was an error, but failed to collect message\" );\r\n      }\r\n      setIsLoading(false);\r\n    }, []);\r\n\r\n  \r\n  return{\r\n      isLoading,\r\n      hasError,\r\n      sendMeal, \r\n      getMeals,\r\n      sendOrder\r\n  }\r\n}; export default useHTTP;"]},"metadata":{},"sourceType":"module"}